{% extends 'shopapp/base.html' %}

{% block title %}
    {% if form.instance.pk %}Редактирование заказа{% else %}Создание заказа{% endif %}
{% endblock %}

{% block content %}
    <h2>
        {% if form.instance.pk %}
            Редактирование заказа #{{ form.instance.pk }}
        {% else %}
            Создание нового заказа
        {% endif %}
    </h2>

    <form method="post">
        {% csrf_token %}

        <div class="form-group">
            {{ form.user.label_tag }}
            {{ form.user }}
            {% if form.user.errors %}
                <div class="error">{{ form.user.errors }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            {{ form.delivery_address.label_tag }}
            {{ form.delivery_address }}
            {% if form.delivery_address.errors %}
                <div class="error">{{ form.delivery_address.errors }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            {{ form.promocode.label_tag }}
            {{ form.promocode }}
            {% if form.promocode.errors %}
                <div class="error">{{ form.promocode.errors }}</div>
            {% endif %}
        </div>

        <div class="form-group">
            <label>{{ form.products.label }}</label>
            <div style="max-height: 300px; overflow-y: auto; border: 1px solid #ddd; padding: 10px;">
                {{ form.products }}
            </div>
            {% if form.products.errors %}
                <div class="error">{{ form.products.errors }}</div>
            {% endif %}
        </div>

        <div style="margin-top: 20px;">
            <button type="submit" class="btn btn-primary">
                {% if form.instance.pk %}Сохранить изменения{% else %}Создать заказ{% endif %}
            </button>
            <a href="{% url 'shopapp:orders_list' %}" class="btn">Отмена</a>
        </div>
    </form>
{% endblock %}