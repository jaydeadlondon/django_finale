{% extends "admin/base_site.html" %}
{% load i18n admin_urls static admin_modify %}

{% block title %}Импорт заказов{% endblock %}

{% block breadcrumbs %}
<div class="breadcrumbs">
    <a href="{% url 'admin:index' %}">Главная</a>
    &rsaquo; <a href="{% url 'admin:shopapp_order_changelist' %}">Заказы</a>
    &rsaquo; Импорт заказов
</div>
{% endblock %}

{% block content %}
<h1>Импорт заказов из CSV файла</h1>

<form method="post" enctype="multipart/form-data">
    {% csrf_token %}
    <div class="form-row">
        <div>
            <label for="{{ form.csv_file.id_for_label }}">{{ form.csv_file.label }}:</label>
            {{ form.csv_file }}
            {% if form.csv_file.help_text %}
                <p class="help">{{ form.csv_file.help_text }}</p>
            {% endif %}
            {% if form.csv_file.errors %}
                <ul class="errorlist">
                    {% for error in form.csv_file.errors %}
                        <li>{{ error }}</li>
                    {% endfor %}
                </ul>
            {% endif %}
        </div>
    </div>

    <div class="submit-row">
        <input type="submit" value="Импортировать" class="default" />
        <a href="{% url 'admin:shopapp_order_changelist' %}" class="button cancel-link">Отмена</a>
    </div>
</form>

<div class="help">
    <h3>Формат CSV файла:</h3>
    <p>CSV файл должен содержать следующие колонки:</p>
    <ul>
        <li><strong>delivery_address</strong> - адрес доставки</li>
        <li><strong>promocode</strong> - промокод (необязательно)</li>
        <li><strong>user_id</strong> - ID пользователя</li>
        <li><strong>product_ids</strong> - ID товаров через запятую (например: 1,2,3)</li>
    </ul>

    <h4>Пример:</h4>
    <pre>delivery_address,promocode,user_id,product_ids
"ул. Пушкина, д. 10",SALE20,1,"1,2,3"
"пр. Ленина, д. 5",,2,"2,4"</pre>
</div>
{% endblock %}